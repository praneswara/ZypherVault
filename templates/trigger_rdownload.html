{% extends "base.html" %}

{% block title %}Download Success{% endblock %}

{% block content %}
<div class="download-container" style="text-align: center; padding: 2rem;">
  <h1 style="color: green;">Download Success!</h1>
  <p>Your download is starting... You will be redirected shortly.</p>
</div>

<script>
  // Automatically trigger the download using a temporary link.
  var link = document.createElement("a");
  link.href = "{{ url_for('download_received_file_start', filename=filename) }}";
  link.download = "{{ filename }}";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  
  // Redirect back to received files after 2 seconds.
  setTimeout(function() {
    window.location.href = "{{ return_url }}";
  }, 2000);
</script>
{% endblock %}
